---
status: planned
depends_on: []
files_modified:
  - .claude/agents/orchestrator.md
---

# Task 1: Create Orchestrator Agent

## Description

Create the central orchestrator agent that handles intent classification and automatic skill selection. This agent replaces the manual "Dynamic Skill Selection" ceremony for most requests.

## What to do

1. Create `.claude/agents/orchestrator.md` with:
   - YAML frontmatter (name, description, model: opus, allowed-tools)
   - Intent classification algorithm (trivial/explicit/exploratory/ambiguous)
   - Skill selection logic based on SKILLS_INDEX.md patterns
   - Delegation instructions for subagents

2. Intent classification rules:
   - **trivial**: Questions, explanations, confirmations (no code changes)
   - **explicit**: Clear task with specific outcome (add X, fix Y, refactor Z)
   - **exploratory**: Vague requirements needing clarification
   - **ambiguous**: Could be multiple interpretations

3. Include skill mapping table:
   - Bug/error → systematic-debugging
   - New code → test-driven-development
   - Feature complete → user-acceptance-testing + verification
   - Personal data → security-checklist

4. Output format (JSON):
```json
{
  "intent": {
    "type": "explicit",
    "confidence": 0.9,
    "reason": "Clear task: add login button"
  },
  "skills": ["test-driven-development"],
  "delegation": {
    "agent": "code-developer",
    "task": "Implement login button per spec"
  }
}
```

## Acceptance Criteria

- [ ] Agent file exists at .claude/agents/orchestrator.md
- [ ] YAML frontmatter valid with model: opus
- [ ] Intent classification algorithm documented with decision tree
- [ ] Skill selection table covers all major scenarios from SKILLS_INDEX
- [ ] Output format matches other agents (JSON response)
- [ ] Includes examples for each intent type
- [ ] Fallback to manual selection documented

## Context Files

**Required:**
- `.claude/agents/code-developer.md` (pattern reference)
- `.claude/agents/code-reviewer.md` (pattern reference)
- `.claude/skills/SKILLS_INDEX.md` (skill catalog for mapping)

## Technical Details

**Files:**
- `.claude/agents/orchestrator.md` - Create new file

**Structure:**
```yaml
---
name: orchestrator
description: Central coordinator for intent classification and skill selection
model: opus
allowed-tools:
  - Read
  - Glob
  - Grep
  - Task
  - AskUserQuestion
---
```

**Edge cases:**
- Request contains both question and task → classify as explicit (task takes priority)
- Multiple possible intents with similar confidence → pick most conservative
- Request explicitly names a skill to use → respect user override
- Context already >50% → warn and suggest subagent

**Implementation hints:**
- Follow existing agent format (see code-developer.md)
- Use description field for detailed usage examples
- Include decision tree diagram in agent prompt
- Reference SKILLS_INDEX.md entry points table for mapping
