---
status: planned
depends_on:
  - 1
  - 3
files_modified:
  - CLAUDE.md
---

# Task 5: Add Autowork Mode to CLAUDE.md

## Description

Add "autowork" keyword mode to CLAUDE.md that triggers full automated pipeline with minimal user intervention.

## What to do

1. Add new section after "## Dynamic Skill Selection":

```markdown
## Autowork Mode (Автоматический режим)

**Trigger:** Сообщение начинается с "autowork:" или "ulw:"

**Пример:** "autowork: добавить авторизацию пользователей"

### Автоматический Pipeline

При активации autowork выполняется полный цикл без ручного выбора skills:

1. **Intent Classification** (orchestrator)
   - Определяет тип задачи
   - Если exploratory → минимальное интервью для user-spec

2. **Spec Generation**
   - Создает user-spec.md автоматически
   - Создает tech-spec.md с tasks

3. **Execution**
   - Запускает subagent-driven-development
   - Отслеживает в background-tasks.json

4. **Quality Gates**
   - UAT автоматически после всех tasks
   - Verification перед completion

5. **Completion**
   - Auto-commit если всё прошло

### Intervention Points

Пользователь может вмешаться на любом checkpoint:
- После user-spec: "Измени требование X"
- После tech-spec: "Используй другой подход"
- После UAT: "Исправь проблему Y"

### Fallback

Если autowork не справляется:
- Переключается на manual skill selection
- Сообщает: "Switching to manual mode: [reason]"

### Когда НЕ использовать autowork

- Очень сложные архитектурные решения
- Когда нужен полный контроль над каждым шагом
- Exploratory research без четкой цели
```

2. Update "## Dynamic Skill Selection" section:
   - Add note: "Для автоматического режима см. Autowork Mode"
   - Keep manual process as default fallback

3. Update "## Agent Orchestration" section:
   - Add orchestrator to agents list
   - Describe when orchestrator is used

4. Add to "## Reference Information" if needed:
   - Autowork command syntax

## Acceptance Criteria

- [ ] Autowork Mode section added after Dynamic Skill Selection
- [ ] Pipeline steps clearly documented (5 steps)
- [ ] Intervention points listed
- [ ] Fallback behavior documented
- [ ] When NOT to use section included
- [ ] Manual fallback preserved and referenced
- [ ] Orchestrator mentioned in Agent Orchestration
- [ ] Russian language consistent with rest of CLAUDE.md

## Context Files

**Required:**
- `CLAUDE.md` (file to update - read first!)
- `.claude/agents/orchestrator.md` (reference for orchestrator section)
- `.claude/skills/context-monitor/SKILL.md` (reference for quality control)

## Technical Details

**Files:**
- `CLAUDE.md` - Update existing file

**Section placement:**
```
# STOP! BLOCKING RULES
  ## State Management (BLOCKING)
  ## Dynamic Skill Selection      ← Update this
  ## Autowork Mode               ← Add after Dynamic Skill Selection
  ## После КАЖДОГО изменения кода
  ...
```

**Dependencies:**
- Task 1 (orchestrator agent) must exist first
- Task 3 (context monitor) for quality control

**Edge cases:**
- User uses "autowork" but wants manual control mid-process → allow override
- Pipeline fails midway → save state, offer manual continuation
- UAT fails repeatedly → escalate to user with options
- Context fills up during autowork → trigger context-monitor, may need subagent
